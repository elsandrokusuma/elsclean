// This is an autogenerated file from Firebase Studio.
// Add your Firebase configuration object here.
// You can find this in the Firebase console for your project.
import {initializeApp, getApp, getApps} from 'firebase/app';
import {getFirestore, collection, getDocs, type DocumentData} from 'firebase/firestore';

const firebaseConfig = {
  apiKey: 'PASTE_YOUR_API_KEY_HERE',
  authDomain: 'PASTE_YOUR_AUTH_DOMAIN_HERE',
  projectId: 'PASTE_YOUR_PROJECT_ID_HERE',
  storageBucket: 'PASTE_YOUR_STORAGE_BUCKET_HERE',
  messagingSenderId: 'PASTE_YOUR_MESSAGING_SENDER_ID_HERE',
  appId: 'PASTE_YOUR_APP_ID_HERE',
};

// Initialize Firebase
const app = !getApps().length ? initializeApp(firebaseConfig) : getApp();
const db = getFirestore(app);

// Function to fetch ads from Firestore
export interface AdData extends DocumentData {
  id: string;
  image: string;
  imageHint: string;
  title: string;
  description: string;
  link: string;
}

export async function getAds(): Promise<AdData[]> {
  // A real app would handle errors, but we'll keep it simple.
  // We will also not handle the case where the config is not filled out.
  // A real app should have a graceful fallback.
  try {
    const adsCollection = collection(db, 'ads');
    const adsSnapshot = await getDocs(adsCollection);
    const adsList = adsSnapshot.docs.map(doc => ({
      id: doc.id,
      ...doc.data(),
    } as AdData));
    return adsList;
  } catch (error) {
    console.error("Error fetching ads from Firestore:", error);
    // Return placeholder data if Firestore fetch fails
    return [
      {
        id: '1',
        image: 'https://i.imgur.com/v8n2M1b.png',
        imageHint: 'clean shoes',
        title: 'Sepatu Kinclong Seperti Baru!',
        description: 'Layanan cuci sepatu premium dengan hasil maksimal.',
        link: '#',
      },
      {
        id: '2',
        image: 'https://placehold.co/1200x400.png',
        imageHint: 'delivery service',
        title: 'Layanan Antar Jemput',
        description: 'Gratis antar jemput untuk wilayah Jakarta.',
        link: '#',
      },
      {
        id: '3',
        image: 'https://placehold.co/1200x400.png',
        imageHint: 'satisfaction guarantee',
        title: 'Garansi Kepuasan',
        description: 'Tidak puas dengan hasilnya? Kami cuci ulang gratis.',
        link: '#',
      },
    ];
  }
}


export {db};
